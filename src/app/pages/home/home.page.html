<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-title class="text-3xl">Bonjour {{ displayName }} 游녦</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <!-- Quick Actions -->
  <div class="flex gap-3 mb-6">
    <button class="quick-action-btn flex-1 bg-primary rounded-xl p-4 flex flex-col items-center justify-center gap-2" (click)="openAddTask()">
      <ion-icon name="add" size="large" color="light"></ion-icon>
      <span class="text-white font-semibold">T칙che</span>
    </button>
    <button class="quick-action-btn flex-1 bg-primary rounded-xl p-4 flex flex-col items-center justify-center gap-2" (click)="openAddProduct()">
      <ion-icon name="add" size="large" color="light"></ion-icon>
      <span class="text-white font-semibold">Produit</span>
    </button>
    <button class="quick-action-btn flex-1 bg-primary rounded-xl p-4 flex flex-col items-center justify-center gap-2" (click)="openAddRecipe()">
      <ion-icon name="add" size="large" color="light"></ion-icon>
      <span class="text-white font-semibold">Recette</span>
    </button>
  </div>

  <!-- T칙ches du jour -->
  <div class="mb-6">
    <h2 class="text-xl mb-3">T칙ches du jour</h2>
    
    @if (todayTasks.length > 0) {
      <div class="flex flex-col bg-white rounded-xl shadow-sm divide-y">
        @for (task of todayTasks; track task.id) {
          <div 
            class="p-4 flex items-center gap-3"
            [class.opacity-60]="task.isCompleted"
          >
            <div 
              class="w-10 h-10 rounded-full flex items-center justify-center"
              [style.background-color]="getAvatarColor(task.assignedToName)"
            >
              <span class="text-sm text-white font-semibold">{{ task.assignedToName.charAt(0) }}</span>
            </div>
            
            <div class="flex-1">
              <h3 
                class="text-base font-semibold mb-1"
                [class.line-through]="task.isCompleted"
              >
                {{ task.title }}
              </h3>
                <span class="text-sm text-gray-500">{{ task.assignedToName }}</span>
            </div>
            
            @if (task.isCompleted) {
              <ion-icon 
                name="checkmark-circle"
                color="success"
                size="large"
              ></ion-icon>
            }
          </div>
        }
      </div>
    } @else {
      <div class="bg-muted rounded-xl p-6 text-center">
        <p class="text-sm text-gray-500">Aucune t칙che pour aujourd'hui</p>
      </div>
    }
  </div>

  <!-- Liste de courses -->
  <div class="mb-6">
    <h2 class="text-xl mb-3">Liste de courses</h2>
    
    @if (shoppingItems.length > 0) {
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <div class="flex flex-col gap-2">
          @for (item of shoppingItems; track item.id) {
            <div class="flex items-center gap-2">
              <span class="text-base">{{ item.ingredient.name }}</span>
              @if (item.ingredient.quantity && item.ingredient.unit) {
                <span class="text-sm text-gray-500">{{ item.ingredient.quantity }}{{ item.ingredient.unit }}</span>
              }
            </div>
          }
        </div>
      </div>
    } @else {
      <div class="bg-muted rounded-xl p-6 text-center">
        <p class="text-sm text-gray-500">Aucun produit dans la liste</p>
      </div>
    }
  </div>
</ion-content>
